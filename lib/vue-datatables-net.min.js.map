{"version":3,"file":"vue-datatables-net.min.js","sources":["../src/VdtnetTable.vue"],"sourcesContent":["<template>\n  <div class=\"vdtnet-container\">\n    <div class=\"container-fluid vdtnet-head\"><slot name=\"HEAD\" /></div>\n    <div class=\"vtdnet-body\">\n      <table\n        v-once\n        ref=\"table\"\n        :class=\"className\"\n      >\n        <thead>\n          <tr>\n            <th\n              v-for=\"(field, i) in options.columns\"\n              :key=\"i\"\n            >\n              <slot\n                :name=\"`HEAD_${field.name}`\"\n                :field=\"field\"\n                :i=\"i\"\n              >\n                <div\n                  :class=\"field.className\"\n                  v-html=\"field.title\" />\n              </slot>\n            </th>\n          </tr>\n        </thead>\n      </table>\n    </div>\n    <div class=\"container-fluid vdtnet-foot\"><slot name=\"FOOT\" /></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'VdtnetTable',\n  props: {\n    className: {\n      type: String,\n      default: 'table table-striped table-bordered dt-responsive nowrap w-100'\n    },\n    url: {\n      type: String\n    },\n    opts: {\n      type: Object\n    },\n    fields: {\n      type: Object\n    }\n  },\n  data() {\n    // initialize defaults\n    return {\n      options: {\n        dom: '<\\'row\\'<\\'col-sm-12 col-md-4\\'l><\\'text-right col-sm-12 col-md-6\\'B><\\'col-sm-12 col-md-2\\'f>>' +\n          '<\\'row\\'<\\'col-sm-12\\'tr>>' +\n          '<\\'row\\'<\\'col-sm-12 col-md-5\\'i><\\'col-sm-12 col-md-7\\'p>>',\n        columns: [],\n        buttons: []  // remove any button defaults\n      },\n      dataTable: null\n    }\n  },\n  mounted() {\n    const vm = this\n\n    // allow user to override default options\n    if (vm.opts) {\n      vm.options = window.jQuery.extend({}, vm.options, vm.opts)\n    }\n\n    if (vm.url) {\n      vm.options.ajax = vm.url\n    }\n\n    // if fields are passed in, generate column definition\n    // from our custom fields schema\n    if (vm.fields) {\n      const fields = vm.fields\n      const cols   = vm.options.columns\n\n      for (let k in fields) {\n        const field = fields[k]\n        field.name = field.name || k\n\n        // generate\n        let col = {\n          searchable: field.searchable,\n          defaultContent: '',\n          title: field.label || k,\n          width: field.width,\n          data: field.name,\n          visible: field.visible,\n          className: field.className\n        }\n\n        if (field.width) {\n          col.width = field.width\n        }\n\n        if (field.sortable) {\n          col.orderable = field.sortable\n        }\n\n        if (field.render) {\n          col.render = field.render\n        }\n        // console.log(col)\n\n        cols.push(col)\n      }\n    }\n\n    const $el = window.jQuery(vm.$refs.table)\n    vm.dataTable = $el.DataTable(vm.options)\n\n    // wire up view, edit, and/or delete button\n    // var d = table.row( this ).data();\n    $el.find('[data-action]').on('click', (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n      const $this  = $(this)\n      const action = $this.data('action')\n      if (action) {\n        const row  = vm.dataTable.row($this.closest('tr'))\n        const data = row.data()\n        vm.$emit(action, {data, row, $this})\n      }\n    })\n  }\n}\n</script>\n"],"names":[],"mappings":";;;;;4LAkCA"}